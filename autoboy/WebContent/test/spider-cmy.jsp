<%@ page import="java.io.*" contentType="text/html;charset=utf-8"%>
<%@ page language="java" import="java.net.*"%>
<%@ page language="java" import="net.sf.json.*,net.sf.ezmorph.Morpher.*" %>
<%
String htmpath=null;  
BufferedReader in = null;  
InputStreamReader isr = null; 
InputStream is = null; 
PrintWriter pw=null;  
HttpURLConnection huc = null; 

try{  
	htmpath="E:\\Users\\workspace\\data\\nianfen.html";  
	pw=new PrintWriter(htmpath); 
	String ids = "110,116,103,220,104,167,113,114,102,119,144,166,153,152,100,120,154,146,107,108,159,184,147,221,117,138,206,126,155,131,222,130,148,209,151,237,149,123,111,112,125,157,121,243,216,106,150,218,132,109,105,124,219,136,128,143,161";
	String strs ="11016,11014,11004,11015,11007,11013,11009,11008,11003,11010,11011,11012,11601,11602,10306,10301,10303,10308,10302,10309,10313,10305,10304,10314,10307,10310,22001,22002,22003,22004,22005,10412,10406,10405,10415,10413,10427,10414,10431,10402,10416,10417,10418,10432,10404,10419,10420,10407,10401,10426,10421,10422,10424,10423,10425,16702,16701,16703,16704,11311,11307,11305,11315,11308,11304,11309,11316,11312,11306,11310,11303,11301,11408,11405,11406,11401,11404,11413,11409,11402,11403,11410,11412,10209,10210,10205,10202,10203,10201,10207,10208,10212,10204,11914,11901,11902,11903,11904,11905,11913,11906,11907,11908,11909,11910,11911,11912,11916,11915,14401,14407,14402,14403,14404,14409,14408,14405,14410,14406,16623,16619,16624,16613,16621,16610,16627,16626,16608,16612,16620,16622,16617,16618,16625,16609,16611,16604,16615,16616,16601,16607,16603,16602,16614,15301,15304,15303,15302,15205,15201,15203,15204,15207,15202,15206,10003,10011,10019,10007,10021,10020,10012,10015,10013,10002,10006,10025,10008,10016,10022,10017,10023,10005,10010,10004,10026,10027,10024,12001,12002,15403,15402,15401,14604,14601,14603,14602,14607,14605,14608,14609,14606,10725,10730,10716,10718,10732,10711,10723,10710,10701,10717,10702,10706,10719,10712,10715,10713,10720,10704,10703,10731,10721,10724,10705,10726,10708,10709,10722,10809,10819,10812,10814,10801,10804,10805,10803,10802,10808,10810,10820,10815,10813,10811,10806,10807,15912,15901,15910,15902,15904,15911,15906,15913,15903,15909,15908,15914,18403,18404,18405,18401,18402,14705,14704,14701,14703,14702,14707,14706,22106,22101,22102,22103,22104,11704,11701,11702,11709,11706,11707,11710,13801,13808,13806,13805,13802,13804,13807,13803,20609,20601,20602,20603,20604,20610,20605,20606,20607,20608,12605,12606,12602,12610,12603,12604,12608,12607,15503,15501,15502,15507,15504,15505,15506,13101,13107,13110,13111,13112,13109,13104,13106,13108,13103,13105,13102,22202,22204,22203,22201,13013,13006,13007,13011,13005,13004,13010,13001,13002,13008,13003,13009,14803,14807,14801,14802,14804,14805,14806,20903,20901,20904,20907,20902,20906,20905,15104,15103,15101,15102,23706,23701,23705,23702,23707,23703,23704,14902,14901,12308,12309,12307,12312,12313,12301,12310,12304,12302,12306,12305,12311,11118,11102,11113,11120,11111,11117,11112,11119,11121,11115,11106,11107,11108,11122,11123,11124,11116,11114,11109,11222,11228,11223,11213,11225,11226,11220,11227,11207,11215,11208,11209,11210,11221,11218,11217,11216,11205,11211,11201,11224,11203,11202,11204,11212,11214,12501,12502,12503,12505,12506,12504,15705,15701,15706,15702,15703,15704,12114,12110,12101,12112,12109,12102,12103,12113,12104,12108,12106,12111,12105,24301,24306,24304,24305,24302,24303,21604,21607,21605,21603,21601,21606,21602,10603,10602,10601,10605,10604,15001,21801,13203,13204,13201,13207,13202,13211,13209,13205,13206,10922,10924,10916,10906,10903,10913,10902,10918,10919,10917,10907,10904,10905,10925,10908,10909,10914,10920,10915,10910,10912,10911,10901,10506,10510,10503,10513,10501,10512,10508,10504,10505,10509,10502,10511,10514,12401,12406,12404,12409,12403,12411,12402,12405,12407,12408,21901,21902,21903,21907,21904,21912,21908,21905,21909,21910,21911,21913,13604,13601,13606,13603,13607,13605,13608,13602,12802,12803,12801,14306,14307,14308,14304,14301,14305,14309,14303,16101,16105,16102,16107,16104,16103,16106";
	String[] arr = strs.split(",");
	//for(int m =0;m< arr.length;m++){
		URL url = new URL("http://www.chemayi.com/car.php?act=new_load&type=brand&firstWord=A&_t=0.302459939615801"); 
		//System.out.println(url);
		//创建 URL 
		huc = (HttpURLConnection)url.openConnection(); 
		huc.setRequestProperty("Referer","http://www.chemayi.com/application.php?act=index");  
		huc.setRequestProperty("user-agent","Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)");
		huc.setRequestProperty("Cookie","PHPSESSID=s56feftpebom63thvg2s7f6nr5; BRIDGE_REFRESH=15000; baidu_qiao_v3_count_3700164=1; haveVisted=6; BRIDGE_R3700164=http://chemayi.com/; Hm_lvt_674713459a1143b91a9a587335a87db3=1394717898,1394788813; Hm_lpvt_674713459a1143b91a9a587335a87db3=1394847704; Hm_lvt_bd939a7c1525a18f8e6813b5b39d5e20=1394717898,1394788813; Hm_lpvt_bd939a7c1525a18f8e6813b5b39d5e20=1394847704; __utma=78293958.706296676.1394717899.1394791851.1394846626.5; __utmb=78293958.5.10.1394846626; __utmc=78293958; __utmz=78293958.1394791851.4.3.utmcsr=chemayi.com|utmccn=(referral)|utmcmd=referral|utmcct=/; VERSION=2,0,0,0; BRIDGE_INVITE_0=0; BRIDGE_NEED=1; BRIDGE_CLOCK=1394848204765");
		is = huc.getInputStream();  
		isr = new InputStreamReader(is); 
		in = new BufferedReader(isr); 
		String line = null;  
		StringBuilder sb = new StringBuilder(); 
		while(((line = in.readLine()) != null)) { 
			if(line.length()==0) continue;  
			sb.append(line);
			
		}
		pw.println(sb); 
		/*
		JSONArray array = JSONArray.fromObject(sb.toString()); 
		for(int i = 0; i < array.size(); i++){ 
			JSONObject jsonObject = array.getJSONObject(i); 
			line = arr[m]+","+jsonObject.getString("Value") + "," + jsonObject.getString("Txt");
			pw.println(line); 
			} 
		*/
	//}
		out.println("数据获取完成");
}   catch (Exception e) { 
	System.err.println(e); 
	out.println("数据获取异常");
}  finally { 
	//无论如何都要关闭流  
	try { 
		is.close(); 
		isr.close();
		in.close();
		huc.disconnect();
		pw.close();  
	} catch (Exception e) {} } 


	

	
%>
